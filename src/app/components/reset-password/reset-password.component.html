<div class="login-bg-img">
  <div  fxLayout="row" fxLayoutAlign="center center">
    <!-- <mat-card class="login-box">
      <mat-card-header *ngIf="!this.authService.otpToValidate">
        <mat-card-title>Reset Password</mat-card-title>
      </mat-card-header>
      <mat-card-header *ngIf="this.authService.otpToValidate && !this.authService.confirmedOTP">
        <mat-card-title>Validate OTP</mat-card-title>
      </mat-card-header>
      <mat-card-header *ngIf="this.authService.confirmedOTP">
        <mat-card-title>Change Password</mat-card-title>
      </mat-card-header>
      <form [formGroup]="resetPasswordForm" class="login-example-form">
        <mat-card-content>
          <mat-form-field *ngIf="!this.authService.otpToValidate" class="login-example-full-width">
            <input matInput id="email" placeholder="Email address" formControlName="email">
          </mat-form-field>
          <mat-form-field *ngIf="this.authService.otpToValidate && !this.authService.confirmedOTP"
            class="login-example-full-width">
            <input matInput id="otp" placeholder="One Time Pin" formControlName="otp" type="text" maxLength=6>
          </mat-form-field>
          <mat-form-field *ngIf="this.authService.confirmedOTP" class="login-example-full-width">
            <input matInput id="newPassword" placeholder="New Password" formControlName="newPassword">
            <div *ngIf="
                              this.resetPasswordForm.controls['newPassword'].invalid &&
                              (this.resetPasswordForm.controls['newPassword'].dirty || this.resetPasswordForm.controls['newPassword'].touched)
                            " class="login-form-text text-danger">
              <div *ngIf="this.resetPasswordForm.controls['newPassword'].errors?.['required']">
                Field is required
              </div>
              <div *ngIf="this.resetPasswordForm.controls['newPassword'].errors?.['pattern']">
                Password must contain at least one number, one uppercase and a
                lowercase letter and at least 8 characters<br />Password cannot
                contain whitespace
              </div>
            </div>
          </mat-form-field>
          <mat-form-field *ngIf="this.authService.confirmedOTP" class="login-example-full-width">
            <input matInput id="confirmPassword" placeholder="Confirm Password" formControlName="confirmPassword">
            <div *ngIf="this.resetPasswordForm.controls['confirmPassword'].invalid &&
                    (this.resetPasswordForm.controls['confirmPassword'].dirty || this.resetPasswordForm.controls['confirmPassword'].touched)
                  " class="login-form-text text-danger">
              <div *ngIf="this.resetPasswordForm.controls['confirmPassword'].errors?.['required']">
                Field is required
              </div>
              <div *ngIf="this.resetPasswordForm.controls['confirmPassword'].errors?.['pattern']">
                Password must contain at least one number, one uppercase and a
                lowercase letter and at least 8 characters<br />Password cannot
                contain whitespace
              </div>
            </div>
          </mat-form-field>
    
        </mat-card-content>
        <button *ngIf="!this.authService.otpToValidate" mat-stroked-button color="accent" class="login-btn-block" type="submit"
          (click)="resetPassword()">Send One Time Pin</button>
    
        <button *ngIf="this.authService.otpToValidate && !this.authService.confirmedOTP" mat-stroked-button color="accent"
          class="login-btn-block" type="submit"
          (click)="this.authService.validateOTP(resetPasswordForm.controls['otp'].value)">Enter OTP</button>
    
        <button *ngIf="this.authService.confirmedOTP" mat-stroked-button (click)="ChangePassword()" color="accent"
          class="login-btn-block" type="submit">Reset Password</button>
        <div>
    
          <button mat-button text-center color="primary" [matMenuTriggerFor]="menu">Use Other Method</button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item>Recovery Email</button>
            <button mat-menu-item>Phone Number</button>
          </mat-menu>
        </div>
      </form>
    </mat-card> -->
      <div class="login-card">
        <h2 class="login-title" *ngIf="!this.authService.otpToValidate">Reset Password</h2>
        <h2 class="login-title" *ngIf="this.authService.otpToValidate && !this.authService.confirmedOTP">Validate OTP</h2>
        <h2 class="login-title" *ngIf="this.authService.confirmedOTP">Change Password</h2>
        <form [formGroup]="resetPasswordForm">
          <div class="login-field" *ngIf="!this.authService.otpToValidate">
            <svg class="login-input-icon" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <path d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"></path></svg>
            <input autocomplete="off" id="email" placeholder="Email" formControlName="email" class="login-input-field" name="email" type="email">
          </div>
          <div class="login-field" *ngIf="this.authService.otpToValidate && !this.authService.confirmedOTP">
            <svg class="login-input-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path d= "M 12.71 0 h 43 A 12.74 12.74 0 0 1 68.43 12.71 V 31.52 H 64.78 V 16 H 3.66 v 89.07 H 64.79 V 95.22 l 3.65 -3 v 17.93 a 12.74 12.74 0 0 1 -12.71 12.71 h -43 A 12.74 12.74 0 0 1 0 110.17 V 12.71 A 12.74 12.74 0 0 1 12.71 0 Z M 36.4 52 a 1.85 1.85 0 0 1 3.69 0 v 2.38 l 2 -1.32 a 1.83 1.83 0 1 1 2 3 l -2.54 1.71 l 2.55 1.69 a 1.84 1.84 0 0 1 -2 3.06 l -2 -1.32 v 2.39 a 1.85 1.85 0 0 1 -3.69 0 V 61.27 l -2 1.32 a 1.83 1.83 0 1 1 -2 -3.05 l 2.55 -1.7 l -2.55 -1.7 a 1.83 1.83 0 1 1 2 -3.06 l 2 1.32 V 52 Z m 38.73 0 a 1.84 1.84 0 0 1 3.68 0 v 2.38 l 2 -1.32 a 1.83 1.83 0 0 1 2 3 l -2.55 1.71 l 2.55 1.69 a 1.84 1.84 0 1 1 -2 3.06 l -2 -1.32 v 2.39 a 1.84 1.84 0 1 1 -3.68 0 V 61.27 l -2 1.32 a 1.84 1.84 0 1 1 -2 -3.05 l 2.55 -1.7 l -2.55 -1.7 a 1.84 1.84 0 1 1 2 -3.06 l 2 1.32 V 52 Z M 55.77 52 a 1.84 1.84 0 0 1 3.68 0 v 2.38 l 2 -1.32 a 1.84 1.84 0 0 1 2 3 l -2.55 1.71 l 2.55 1.69 a 1.84 1.84 0 1 1 -2 3.06 l -2 -1.32 v 2.39 a 1.84 1.84 0 0 1 -3.68 0 V 61.27 l -2 1.32 a 1.83 1.83 0 0 1 -2 -3.05 l 2.55 -1.7 l -2.55 -1.7 a 1.84 1.84 0 1 1 2 -3.06 l 2 1.32 V 52 Z M 26.55 39.11 H 88.17 a 5.08 5.08 0 0 1 5 5.06 V 71.24 a 5.26 5.26 0 0 1 -5 5.26 H 66.53 C 61 83.51 53.79 87.73 45.27 90 a 1.89 1.89 0 0 1 -1.88 -0.56 a 1.86 1.86 0 0 1 0.15 -2.64 a 20.35 20.35 0 0 0 2.74 -2.9 a 25.27 25.27 0 0 0 3.45 -7.6 H 26.55 a 5.09 5.09 0 0 1 -5.06 -5.06 V 44.17 a 5.07 5.07 0 0 1 5.06 -5.06 Z M 34.22 109 A 5.21 5.21 0 1 1 29 114.25 A 5.22 5.22 0 0 1 34.22 109 Z"></path></svg>
            <input autocomplete="off" id="email" placeholder="One Time Pin" formControlName="otp" class="login-input-field" name="otp" type="text">
          </div>
          <div class="login-field" *ngIf="this.authService.confirmedOTP">
            <svg class="login-input-icon" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <path d="M80 192V144C80 64.47 144.5 0 224 0C303.5 0 368 64.47 368 144V192H384C419.3 192 448 220.7 448 256V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V256C0 220.7 28.65 192 64 192H80zM144 192H304V144C304 99.82 268.2 64 224 64C179.8 64 144 99.82 144 144V192z"></path></svg>
            <input autocomplete="off" id="password"  placeholder="New Password" formControlName="newPassword" class="login-input-field">
          </div>
          <div *ngIf="
                            this.resetPasswordForm.controls['newPassword'].invalid &&
                            (this.resetPasswordForm.controls['newPassword'].dirty || this.resetPasswordForm.controls['newPassword'].touched)
                          " class="login-form-text text-danger">
              <div *ngIf="this.resetPasswordForm.controls['newPassword'].errors?.['required']">
                Field is required
              </div>
              <div *ngIf="this.resetPasswordForm.controls['newPassword'].errors?.['pattern']">
                Password must contain at least one number, one uppercase and a
                lowercase letter and at least 8 characters<br />Password cannot
                contain whitespace
              </div>
            </div>
          <div class="login-field" *ngIf="this.authService.confirmedOTP">
            <svg class="login-input-icon" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <path d="M80 192V144C80 64.47 144.5 0 224 0C303.5 0 368 64.47 368 144V192H384C419.3 192 448 220.7 448 256V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V256C0 220.7 28.65 192 64 192H80zM144 192H304V144C304 99.82 268.2 64 224 64C179.8 64 144 99.82 144 144V192z"></path></svg>
            <input autocomplete="off" id="password"  placeholder="Confirm Password" formControlName="confirmPassword" class="login-input-field">
          </div>
          <div *ngIf="
                            this.resetPasswordForm.controls['confirmPassword'].invalid &&
                            (this.resetPasswordForm.controls['confirmPassword'].dirty || this.resetPasswordForm.controls['confirmPassword'].touched)
                          " class="login-form-text text-danger">
              <div *ngIf="this.resetPasswordForm.controls['confirmPassword'].errors?.['required']">
                Field is required
              </div>
              <div *ngIf="this.resetPasswordForm.controls['confirmPassword'].errors?.['pattern']">
                Password must contain at least one number, one uppercase and a
                lowercase letter and at least 8 characters<br />Password cannot
                contain whitespace
              </div>
            </div>
          <!-- Email Button -->
          <button *ngIf="!this.authService.otpToValidate" class="login-btn" type="submit" 
          (click)="resetPassword()">Send OTP</button>
          <!-- OTP Button -->
          <button *ngIf="this.authService.otpToValidate && !this.authService.confirmedOTP" class="login-btn" type="submit" 
          (click)="this.authService.validateOTP(resetPasswordForm.controls['otp'].value)">Send OTP</button>
          <button *ngIf="this.authService.confirmedOTP" class="login-btn" type="submit" 
          (click)="ChangePassword()">Reset Password</button>
          <br>
          <div *ngIf="this.authService.otpPending">
            <p style="color: #f5f5f5;">Sending OTP...</p>
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
          </div>
          <a *ngIf="!this.authService.otpToValidate && !this.authService.otpPending" href="#" class="login-btn-link" >Cancel</a>
          <a *ngIf="this.authService.confirmedOTP" href="#" class="login-btn-link" >Cancel</a>
        </form>
      </div>
  </div>
</div>
